"use strict";
var list=document.querySelector(".list"),form=document.querySelector(".js-form"),inputName=document.querySelector('input[type="text"]'),inputUrl=document.querySelector('input[type="url"]'),savedBookmark=JSON.parse(localStorage.getItem("bookmark")),source=document.querySelector("#url-cards").innerHTML.trim(),template=Handlebars.compile(source);function addBookmark(e){if(e.preventDefault(),savedBookmark.some(function(e){return e.url===inputUrl.value}))openModal("Закладка с таким url уже есть!");else{var o={};o.name=inputName.value,o.url=inputUrl.value,savedBookmark.unshift(o),list.innerHTML=template(savedBookmark),localStorage.setItem("bookmark",JSON.stringify(savedBookmark)),form.reset()}}function delBookmark(e){if(console.log(),"del"===e.target.dataset.action){e.preventDefault();var o=e.path[1];savedBookmark.splice(savedBookmark.map(function(e){return e.url}).indexOf(o.children[1].children[0].textContent),1),localStorage.setItem("bookmark",JSON.stringify(savedBookmark)),e.path[1].remove()}}null===savedBookmark&&(savedBookmark=[]),savedBookmark&&(list.innerHTML=template(savedBookmark)),form.addEventListener("submit",addBookmark),list.addEventListener("click",delBookmark);var modal=document.querySelector(".js-modal-backdrop");function openModal(e){modal.classList.remove("modal-hidden"),modal.innerHTML='<div class="modal-content">\n  <div class="close-btn" data-action="close-modal"></div>\n  <p class="modal-text">'.concat(e,"</p></div>"),modal.querySelector(".close-btn").addEventListener("click",closeModal)}function closeModal(){modal.classList.add("modal-hidden")}window.onclick=function(e){e.target==modal&&modal.classList.add("modal-hidden")};